package hw3;

import java.util.*;


public class Scheduler {
	private LinkedList<Event> Schedule;
	
	public Scheduler(double lamb, double sr, double lr, double simulationLength){
		//Constructor: sets arrival, service, and logging rates 
		MM1Event emitter = new MM1Event(lamb, sr, lr);
		Schedule = new LinkedList<Event>();
		
		//populate Events list till simulation time is reached
		double eventTime = 0;
		while(eventTime < simulationLength){
			//add Births 
			Event birth = emitter.nextBirth(eventTime);
			Schedule.add(birth);
			eventTime = birth.time;
			
			//add Logs
			Event log = emitter.nextLog(eventTime);
			Schedule.add(log);
			
			//add corresponding Deaths
			Event death = emitter.nextDeath(eventTime);
			Schedule.add(death);
			
		}

		Collections.sort(Schedule);
		System.out.println(Schedule);
	}
	
	public Event nextEvent(double currentTime){
		//Returns the next event 
		return Schedule.removeFirst();
	}
}
