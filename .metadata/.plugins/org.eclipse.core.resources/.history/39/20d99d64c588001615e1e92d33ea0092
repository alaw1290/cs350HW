package hw3;

import java.util.*;


public class Scheduler {
	private LinkedList<Event> Schedule;
	
	public Scheduler(double lamb, double sr, double lr, double simulationLength){
		//Constructor: sets arrival, service, and logging rates 
		MM1Event emitter = new MM1Event(lamb, sr, lr);
		
		//populate Events list till simulation time is reached
		double eventTime = 0;
		for(double t = 0; t < simulationLength; t = eventTime){
			//add Births and corresponding Deaths
			Event birth = emitter.nextBirth(t);
			Schedule.add(birth);
			eventTime = birth.time;
			Event death = emitter.nextDeath(eventTime);
			Schedule.add(death);
			//add Logs
			Event log = emitter.nextLog(t);
			Schedule.add(log);
		}

		Collections.sort(Schedule);
		System.out.println(Schedule);
	}
	
	public Event nextEvent(double currentTime){
		//Returns the next event 
		
		return Schedule.removeFirst();
	}
}
