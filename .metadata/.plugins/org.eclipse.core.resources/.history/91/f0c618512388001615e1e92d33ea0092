package hw3;


public class Scheduler {
	private Event birthEvent;
	private Event deathEvent;
	private Event logEvent;
	private MM1Event calendar;
	private double simulationLength;
	private LinkedList<Events> Events;
	
	public Scheduler(double lamb, double sr, double lr, double simlen){
		//Constructor: sets arrival, service, and logging rates 
		calendar = new MM1Event(lamb, sr, lr);
		birthEvent = calendar.nextBirth(0);
		deathEvent = calendar.nextDeath(birthEvent.time);
		logEvent = calendar.nextLog(0);
		simulationLength = simlen;
	}
	
	public Event nextEvent(double currentTime){
		//Returns the next event and sets a new one in its place
		Event nextEvent = birthEvent;
		
		if(nextEvent.time > deathEvent.time){
			nextEvent = deathEvent;
		}
		else if(nextEvent.time > logEvent.time){
			nextEvent = logEvent;
		}
		
		if(nextEvent.type == 0){
			birthEvent = calendar.nextBirth(nextEvent.time);
			deathEvent = calendar.nextDeath(nextEvent.time);
		}
		
		else if(nextEvent.type == 1){
			deathEvent = calendar.nextDeath(nextEvent.time);
		}
		
		else{
			logEvent = calendar.nextLog(nextEvent.time);
		}
		return nextEvent;
	}
}
